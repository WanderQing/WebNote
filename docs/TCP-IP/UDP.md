# 用户数据报协议UDP

UDP协议只在IP的数据报服务上增加了复用和分用以及差错检测的功能

UDP的主要特点:
1. UDP是**无连接**的, 发送数据之前不需要先建立连接
2. UDP**尽最大努力交付**, 不保证可靠交付
3. UDP是**面向报文**的
4. UDP是**没有拥塞控制**的, 我们在日常生活中观看直播, 和好朋友进行QQ电话时, 如果有一方有网络延迟, 那么会丢失一些数据, 这样的好处是时延会降低, 因此UDP常用于实时应用.
5. UDP**支持一对一、一对多、多对一、多对多的交互通信**
6. UDP首部开销小, 只用了8个字节(Byte), TCP用了20个字节

## 首部格式
一共有4个字段, 每个字段占用2个字节, 共8个字节
1. 源端口(需要对方回信时使用, 不需要时用全0填充)
2. 目的端口
3. 长度, UDP用户数据报的长度, 其最小值为8个字节, 仅有首部的长度
4. 检验和, 检测UDP用户数据报在传输中是否有错. 有错则丢弃


## UDP检验和

UDP检验和时，首先需要添加12个字节的伪首部，如下：

|字段名称|字节大小|
|:--:|:--:|
|源IP地址|2|
|目的IP地址|2|
|检验和字段|1|
|填充对齐字段|1|
|协议号|1|
|UDP首部长度|1|

填充对齐字段是0x0，构成12字节
UDP的协议号是17